---
title: "380.çº¿æ€§æ—¶é—´æ—¶é—´æ’å…¥ã€åˆ é™¤å’Œè·å–éšæœºå…ƒç´ "
description: "380.çº¿æ€§æ—¶é—´æ—¶é—´æ’å…¥ã€åˆ é™¤å’Œè·å–éšæœºå…ƒç´ "
keywords: "380.çº¿æ€§æ—¶é—´æ—¶é—´æ’å…¥ã€åˆ é™¤å’Œè·å–éšæœºå…ƒç´ "

date: 2023-10-31T21:29:42+08:00
lastmod: 2023-10-31T21:29:42+08:00

categories:
  - leetcode
tags:
  - æ¯æ—¥ä¸€é¢˜


# åŸæ–‡ä½œè€…
author: zzzi
# å¼€å¯æ•°å­¦å…¬å¼æ¸²æŸ“ï¼Œå¯é€‰å€¼ï¼š mathjax, katex
# Support Math Formulas render, options: mathjax, katex
math: mathjax

# å¼€å¯æ–‡ç« ç½®é¡¶ï¼Œæ•°å­—è¶Šå°è¶Šé å‰
# Sticky post set-top in home page and the smaller nubmer will more forward.
#weight: 1
# å…³é—­æ–‡ç« ç›®å½•åŠŸèƒ½
# Disable table of content
#toc: false


# åŸæ–‡é“¾æ¥
# Post's origin link URL
#link:
# å›¾ç‰‡é“¾æ¥ï¼Œç”¨åœ¨open graphå’Œtwitterå¡ç‰‡ä¸Š
# Image source link that will use in open graph and twitter card
#imgs:
# åœ¨é¦–é¡µå±•å¼€å†…å®¹
# Expand content on the home page
#expand: true
# å¤–éƒ¨é“¾æ¥åœ°å€ï¼Œè®¿é—®æ—¶ç›´æ¥è·³è½¬
# It's means that will redirecting to external links
#extlink:
# åœ¨å½“å‰é¡µé¢å…³é—­è¯„è®ºåŠŸèƒ½
# Disabled comment plugins in this post
#comment:
#  enable: false

# ç»å¯¹è®¿é—®è·¯å¾„
# Absolute link for visit
#url: "380.çº¿æ€§æ—¶é—´æ—¶é—´æ’å…¥ã€åˆ é™¤å’Œè·å–éšæœºå…ƒç´ .html"


# å¼€å¯å„ç§å›¾æ¸²æŸ“ï¼Œå¦‚æµç¨‹å›¾ã€æ—¶åºå›¾ã€ç±»å›¾ç­‰
# Enable chart render, such as: flow, sequence, classes etc
#mermaid: true
---

>ğŸ… 380.çº¿æ€§æ—¶é—´æ—¶é—´æ’å…¥ã€åˆ é™¤å’Œè·å–éšæœºå…ƒç´ 

å®ç°`RandomizedSet` ç±»ï¼š

- `RandomizedSet()` åˆå§‹åŒ– `RandomizedSet` å¯¹è±¡
- `bool insert(int val)` å½“å…ƒç´  `val` ä¸å­˜åœ¨æ—¶ï¼Œå‘é›†åˆä¸­æ’å…¥è¯¥é¡¹ï¼Œå¹¶è¿”å› `true` ï¼›å¦åˆ™ï¼Œè¿”å› `false` ã€‚
- `bool remove(int val)` å½“å…ƒç´  `val` å­˜åœ¨æ—¶ï¼Œä»é›†åˆä¸­ç§»é™¤è¯¥é¡¹ï¼Œå¹¶è¿”å› `true` ï¼›å¦åˆ™ï¼Œè¿”å› `false` ã€‚
- `int getRandom()` éšæœºè¿”å›ç°æœ‰é›†åˆä¸­çš„ä¸€é¡¹ï¼ˆæµ‹è¯•ç”¨ä¾‹ä¿è¯è°ƒç”¨æ­¤æ–¹æ³•æ—¶é›†åˆä¸­è‡³å°‘å­˜åœ¨ä¸€ä¸ªå…ƒç´ ï¼‰ã€‚æ¯ä¸ªå…ƒç´ åº”è¯¥æœ‰ **ç›¸åŒçš„æ¦‚ç‡** è¢«è¿”å›ã€‚

ä½ å¿…é¡»å®ç°ç±»çš„æ‰€æœ‰å‡½æ•°ï¼Œå¹¶æ»¡è¶³æ¯ä¸ªå‡½æ•°çš„ **å¹³å‡** æ—¶é—´å¤æ‚åº¦ä¸º `O(1)` ã€‚

<!--more-->

## æ€è·¯

### æç¤º

- `-231 <= val <= 231 - 1`
- æœ€å¤šè°ƒç”¨ `insert`ã€`remove` å’Œ `getRandom` å‡½æ•° `2 * 10^5` æ¬¡
- åœ¨è°ƒç”¨ `getRandom` æ–¹æ³•æ—¶ï¼Œæ•°æ®ç»“æ„ä¸­ **è‡³å°‘å­˜åœ¨ä¸€ä¸ª** å…ƒç´ ã€‚

### åŸºæœ¬æ€æƒ³

ä¸ºäº†å®ç°çº¿æ€§æ—¶é—´çš„æ’å…¥å’Œåˆ é™¤ï¼Œéœ€è¦çŸ¥é“æœ€è€—è´¹æ—¶é—´çš„æ˜¯ä»€ä¹ˆï¼Œä¸ºäº†æ’å…¥å’Œåˆ é™¤ï¼Œé¦–å…ˆéœ€è¦æ‰¾åˆ°è¿™ä¸ªå…ƒç´ ï¼Œæ‰¾å…ƒç´ çš„è¿‡ç¨‹å°±å¾ˆæ¶ˆè€—æ—¶é—´ï¼Œäºæ˜¯å°†æ‰¾å…ƒç´ çš„åŠŸèƒ½é›†æˆåˆ°å“ˆå¸Œè¡¨ä¸­ï¼Œè¿™æ ·æ‰¾å…ƒç´ å°±å¯ä»¥åœ¨çº¿æ€§æ—¶é—´å†…å®Œæˆï¼Œä¸ºäº†è¿›ä¸€æ­¥å‡å°æ’å…¥å’Œåˆ é™¤çš„æ—¶é—´å¤æ‚åº¦ï¼Œå¯ä»¥å°†å…ƒç´ å­˜å‚¨åˆ°ä¸€ä¸ªæ•°ç»„ä¸­ï¼Œæ’å…¥æ—¶ç›´æ¥åœ¨å°¾éƒ¨æ’å…¥ï¼Œç„¶ååœ¨å“ˆå¸Œè¡¨ä¸­è®°å½•å…ƒç´ çš„å€¼å’Œå…ƒç´ çš„ä½ç½®ï¼Œåˆ é™¤æ—¶å…ˆåœ¨å“ˆå¸Œè¡¨ä¸­æ‰¾åˆ°å…ƒç´ çš„ä½ç½®ï¼Œç„¶åè®©æ•°ç»„çš„é»˜è®¤å…ƒç´ è¦†ç›–å¾…åˆ é™¤çš„å…ƒç´ å³å¯

> å“ˆå¸Œè¡¨è´Ÿè´£è®°å½•å…ƒç´ çš„ä½ç½®ï¼Œæ•°ç»„è´Ÿè´£å­˜å‚¨å…ƒç´ ï¼Œè¿™æ ·æ’å…¥å’Œåˆ é™¤éƒ½å¾ˆå¿«

### æ‰§è¡Œæµç¨‹

1. åˆå§‹åŒ–å“ˆå¸Œè¡¨å­˜å‚¨å…ƒç´ çš„ä½ç½®ï¼Œé”®ä»£è¡¨å…ƒç´ çš„å†…å®¹ï¼Œå€¼ä»£è¡¨å…ƒç´ åœ¨æ•°ç»„ä¸­å­˜å‚¨çš„ä½ç½®
2. åˆå§‹åŒ–æ•°ç»„å­˜å‚¨å…ƒç´ çš„å†…å®¹ï¼Œä½¿ç”¨ä¸€ä¸ªä¸‹æ ‡è®°å½•å½“å‰æœ‰æ•ˆå…ƒç´ çš„æœ€åä½ç½®ï¼Œå› ä¸ºæç¤ºä¸­è¯´æœ€å¤šè°ƒç”¨ `insert`ã€`remove` å’Œ `getRandom` å‡½æ•° `2 * 10^5` æ¬¡ï¼Œæ‰€ä»¥æ•°ç»„æœ€å¤§å°±æ˜¯`200000`
3. æ’å…¥æ—¶å…ˆè®°å½•å…ƒç´ çš„ä½ç½®ï¼Œå†æ’å…¥
4. åˆ é™¤æ—¶å…ˆè·å–å…ƒç´ çš„ä½ç½®ï¼Œå†åˆ é™¤ï¼Œåˆ é™¤çš„æ—¶å€™ç›´æ¥ä½¿ç”¨æœ€åä¸€ä¸ªä½ç½®çš„å…ƒç´ è¦†ç›–å¾…åˆ é™¤å…ƒç´ ï¼Œç„¶åæ›´æ–°å“ˆå¸Œè¡¨ä¸­å…ƒç´ çš„ä½ç½®ï¼Œæœ€åæ›´æ–°æ•°ç»„çš„é•¿åº¦å³å¯

## ä»£ç 

æ ¹æ®ä»¥ä¸Šåˆ†æï¼Œå¾—å‡ºä»¥ä¸‹ä»£ç ï¼š

```java
class RandomizedSet {
    private Map<Integer,Integer> map;
    int[] nums;
    int index;
    Random r;
    public RandomizedSet() {
        map=new HashMap<>();
        nums=new int[200001];
        index=-1;
        r=new Random();
    }
    
    public boolean insert(int val) {
        if(map.get(val)!=null)
            return false;
        nums[++index]=val;
        map.put(val,index);
        return true;
    }
    
    public boolean remove(int val) {
        if(map.get(val)==null)
            return false;
        int location=map.remove(val);
        //åˆ é™¤çš„ä¸æ˜¯æœ€åä¸€ä¸ªå…ƒç´ 
        if(location!=index)
            //å°†æœ€åä¸€ä¸ªå…ƒç´ è¦†ç›–åˆ°å¾…åˆ é™¤çš„å…ƒç´ ä½ç½®ä¸Š
            map.put(nums[index],location);
        //åˆ é™¤æœ€åä¸€ä¸ªä½ç½®çš„å…ƒç´ 
        nums[location]=nums[index--];
        return true;
    }
    
    public int getRandom() {
        return nums[r.nextInt(index+1)];
    }
}
```

## æ€»ç»“

ä¸»è¦æ˜¯åˆ©ç”¨å“ˆå¸Œè¡¨å­˜å‚¨å…ƒç´ çš„ä½ç½®ï¼Œç„¶ååˆ©ç”¨æ•°ç»„æ’å…¥åˆ é™¤ï¼Œå°½å¯èƒ½é™ä½æ—¶é—´å¤æ‚åº¦
